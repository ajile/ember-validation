<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-addon_components_form-validation.html">addon/components/form-validation</a><ul class='methods'><li data-type='method'><a href="module-addon_components_form-validation.html#~didReceiveAttrs">didReceiveAttrs</a></li><li data-type='method'><a href="module-addon_components_form-validation.html#~hideAllErrors">hideAllErrors</a></li><li data-type='method'><a href="module-addon_components_form-validation.html#~showAllErrors">showAllErrors</a></li><li data-type='method'><a href="module-addon_components_form-validation.html#~submit">submit</a></li><li data-type='method'><a href="module-addon_components_form-validation.html#~submitDone">submitDone</a></li><li data-type='method'><a href="module-addon_components_form-validation.html#~submitEnd">submitEnd</a></li><li data-type='method'><a href="module-addon_components_form-validation.html#~submitFailed">submitFailed</a></li><li data-type='method'><a href="module-addon_components_form-validation.html#~validationEnd">validationEnd</a></li><li data-type='method'><a href="module-addon_components_form-validation.html#~validationFailed">validationFailed</a></li><li data-type='method'><a href="module-addon_components_form-validation.html#~validationPassed">validationPassed</a></li><li data-type='method'><a href="module-addon_components_form-validation.html#~validationStart">validationStart</a></li></ul></li><li><a href="module-addon_core_error.html">addon/core/error</a><ul class='methods'><li data-type='method'><a href="module-addon_core_error.html#~toString">toString</a></li></ul></li><li><a href="module-addon_core_errors.html">addon/core/errors</a></li><li><a href="module-addon_core_mediator.html">addon/core/mediator</a><ul class='methods'><li data-type='method'><a href="module-addon_core_mediator.html#~_check">_check</a></li><li data-type='method'><a href="module-addon_core_mediator.html#~_validate">_validate</a></li><li data-type='method'><a href="module-addon_core_mediator.html#~check">check</a></li><li data-type='method'><a href="module-addon_core_mediator.html#~conditionDidChange">conditionDidChange</a></li><li data-type='method'><a href="module-addon_core_mediator.html#~optionsToJSON">optionsToJSON</a></li><li data-type='method'><a href="module-addon_core_mediator.html#~validate">validate</a></li></ul></li><li><a href="module-addon_mediators_attribute.html">addon/mediators/attribute</a><ul class='methods'><li data-type='method'><a href="module-addon_mediators_attribute.html#~_check">_check</a></li><li data-type='method'><a href="module-addon_mediators_attribute.html#~_validate">_validate</a></li><li data-type='method'><a href="module-addon_mediators_attribute.html#~objectAtContent">objectAtContent</a></li><li data-type='method'><a href="module-addon_mediators_attribute.html#~replace">replace</a></li></ul></li><li><a href="module-addon_mediators_element.html">addon/mediators/element</a><ul class='methods'><li data-type='method'><a href="module-addon_mediators_element.html#~_validate">_validate</a></li></ul></li><li><a href="module-addon_mediators_element-proxy.html">addon/mediators/element-proxy</a><ul class='methods'><li data-type='method'><a href="module-addon_mediators_element-proxy.html#~_validate">_validate</a></li></ul></li><li><a href="module-addon_mediators_model-validator.html">addon/mediators/model-validator</a><ul class='methods'><li data-type='method'><a href="module-addon_mediators_model-validator.html#~getSnapshot">getSnapshot</a></li></ul></li><li><a href="module-addon_mediators_validator.html">addon/mediators/validator</a><ul class='methods'><li data-type='method'><a href="module-addon_mediators_validator.html#~_validate">_validate</a></li><li data-type='method'><a href="module-addon_mediators_validator.html#~getSnapshot">getSnapshot</a></li></ul></li><li><a href="module-addon_mixins_component.html">addon/mixins/component</a><ul class='methods'><li data-type='method'><a href="module-addon_mixins_component.html#~_addElementMediator">_addElementMediator</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_createElementMediator">_createElementMediator</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_find">_find</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_hideErrors">_hideErrors</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_onContextDidChange">_onContextDidChange</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_onDidInsertElement">_onDidInsertElement</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_onMediatorDidAdd">_onMediatorDidAdd</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_onMediatorWillDestroy">_onMediatorWillDestroy</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_showErrors">_showErrors</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_subscribe">_subscribe</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_triggerValidateFailed">_triggerValidateFailed</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_triggerValidatePassed">_triggerValidatePassed</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~_unsubscribe">_unsubscribe</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~add">add</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~clear">clear</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~clearValidation">clearValidation</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~initErrors">initErrors</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~initValidation">initValidation</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~isChild">isChild</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~remove">remove</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~resetErrors">resetErrors</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~resetValidation">resetValidation</a></li><li data-type='method'><a href="module-addon_mixins_component.html#~unknownProperty">unknownProperty</a></li></ul></li><li><a href="module-addon_mixins_model.html">addon/mixins/model</a><ul class='methods'><li data-type='method'><a href="module-addon_mixins_model.html#~_createValidatorMediator">_createValidatorMediator</a></li></ul></li><li><a href="module-addon_mixins_validatable.html">addon/mixins/validatable</a><ul class='methods'><li data-type='method'><a href="module-addon_mixins_validatable.html#~validate">validate</a></li></ul></li><li><a href="module-addon_mixins_validation.html">addon/mixins/validation</a><ul class='methods'><li data-type='method'><a href="module-addon_mixins_validation.html#~_createAttributeMediator">_createAttributeMediator</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~_createValidatorMediator">_createValidatorMediator</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~_createValidators">_createValidators</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~_runMediators">_runMediators</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~addMediator">addMediator</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~check">check</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~checkByName">checkByName</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~clearErrors">clearErrors</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~clearErrorsByName">clearErrorsByName</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~initValidation">initValidation</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~removeMediator">removeMediator</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~validate">validate</a></li><li data-type='method'><a href="module-addon_mixins_validation.html#~validateByName">validateByName</a></li></ul></li><li><a href="module-addon_validators_email.html">addon/validators/email</a></li><li><a href="module-addon_validators_number.html">addon/validators/number</a></li><li><a href="module-addon_validators_regexp.html">addon/validators/regexp</a></li><li><a href="module-addon_validators_required.html">addon/validators/required</a></li><li><a href="module-addon_validators_string.html">addon/validators/string</a></li></ul><h3>Events</h3><ul><li><a href="module-addon_core_mediator.html#~event:conditionChanged">conditionChanged</a></li><li><a href="module-addon_core_mediator.html#~event:failed">failed</a></li><li><a href="module-addon_core_mediator.html#~event:passed">passed</a></li></ul><h3>Mixins</h3><ul><li><a href="module-addon_mixins_component-addon_mixins_component.html">addon/mixins/component</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_onFocusIn">_onFocusIn</a></li><li><a href="global.html#_onFocusOut">_onFocusOut</a></li><li><a href="global.html#lookup">lookup</a></li><li><a href="global.html#lookupPreset">lookupPreset</a></li><li><a href="global.html#lookupValidator">lookupValidator</a></li><li><a href="global.html#merge">merge</a></li><li><a href="global.html#view">view</a></li><li><a href="global.html#viewDidChange">viewDidChange</a></li><li><a href="global.html#willDestroy">willDestroy</a></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>Ember Validation <a href="https://travis-ci.org/ajile/ember-validation"><img src="https://travis-ci.org/ajile/ember-validation.svg?branch=master" alt="Build Status"></a></h1><p>Yet another one ember validation (<a href="http://ajile.github.io/ember-validation/#/quick-start">Official Site</a>).</p>
<p><img src="https://raw.githubusercontent.com/ajile/ember-validation/master/files/uml.png" width="100%" /></p>
<h2>Введение</h2><h3>Знакомство</h3><p>Чтобы включить валидацию на объекте нужно:</p>
<ul>
<li>Подключить специальный миксин <code>ValidationMixin</code> (или наследника, например специальный миксин для модели)</li>
<li>Описать в объекте схему валидации (свойство <code>validationScheme</code>)</li>
</ul>
<p>Миксин <code>ValidationMixin</code> при инициализации объекта по схеме валидации создает медиаторы и валидаторы к ним, добавляет методы валидации в объект (основные методы это <code>validate</code> и <code>validateAttribute</code>). При вызове метода <code>validate</code> дергаются все медиаторы, которые вызывают валидаторы, передавая в них требуемые для проверки агрументы.</p>
<p>Валидаторы вызываются с 3-мя аргумента: <code>имя_аттрибута</code>, <code>контекст</code> и <code>опции</code>. Они проверяют в соответствии с опциями значения аттрибутов, взятые из контекста и возвращают Promise объект.</p>
<p>Промисы на reject содержат сообщение об ошибке (или ключ ошибки). При неуспешном выполнении хотя бы одного валидатора, объект наполняется ошибками и объект становится невалидным.</p>
<p>В случае модели объект <code>Errors</code> на изменение кол-ва своих элементов отстреливает события <code>invalid</code> и <code>valid</code>, которые переключают состояние объектов, к которым он принадлежит.
В общем же случае свойства <code>isInvalid</code> и <code>isValid</code> зависят от кол-ва элементов в Errors.</p>
<h4>Хеш validationScheme (Схема валидации)</h4><p>Основной хеш, содержащий правила валидации. По нему создаются медиаторы и валидаторы, которые и реализуют проверку значений на полях.</p>
<p>Структура хеша <code>validationScheme</code>:</p>
<pre class="prettyprint source lang-es6"><code>validationScheme: {
  ATTRIBUTE_NAME: {
    options: ATTRIBUTE_OPTIONS,
    validators: [
      { name: VALIDATOR_NAME, options: VALIDATOR_OPTIONS }
    ]
  }
}</code></pre><ul>
<li>ATTRIBUTE_NAME - имя аттрибута обеъекта, оно будет передаваться в валидатор вместе с контектом.</li>
<li>MEDIATOR_OPTIONS - хеш, который миксуется в медиатор аттрибута</li>
<li>VALIDATOR_NAME - имя валидатора, по нему lookuping класс валидатора в <code>validators:VALIDATOR_NAME</code></li>
<li>VALIDATOR_OPTIONS - хеш, который миксуется в медиатор валидатора</li>
</ul>
<p>Структура создаваемая по схеме:</p>
<pre class="prettyprint source lang-es6"><code>Ember.Object &lt;--- ValidationMixin
    | (1..*)
    AttributeMediator &lt;--- ATTRIBUTE_OPTIONS
        | (*..*)
        ValidatorMediator &lt;--- VALIDATOR_OPTIONS
            | (1..1)
            Validator</code></pre><h4>Хеш validationProperties (Параметры валидации)</h4><pre class="prettyprint source lang-es6"><code>
validationProperties = {

  // Условия при которых валидация поля включена. Можно указать computed и в таком случае,
  // при изменении связанного поля будет происходить перевалидация поля.
  condition: Ember.computed,

  // Слушатель, который реагирует на изменения связанного аттрибута. Он
  // перезапускает валидацию.
  observes: Ember.observer

}</code></pre><h3>Валидаторы</h3><h4>Список валидаторов и их validationProperties</h4><p>[WIP]</p>
<h4>Написание собственных валидаторов</h4><p>[WIP]</p>
<h4>Кастомизация существующих собственных валидаторов</h4><p>[WIP]</p>
<h4>Использование валидаторов отдельно от системы вализации</h4><p>[WIP]</p>
<h2>Использование</h2><h3>Валидация на уровне модели</h3><p>Модель должна расширяться миксином <code>ModelValidationMixin</code>. Валидаторы можно указать несколькими способами:</p>
<ul>
<li>У каждого аттрибута прописать имя валидатора и параметры валидации</li>
<li>Отдельным хешом <code>validationScheme</code> (см. выше)</li>
</ul>
<p>Миксин валидации создает валидаторы на поля модели, а также перекрывает метод save. Вставляет
проверку валидности модели перед вызовом <code>DS#save</code>. Эту опцию можно отключить, передав в метод save
дополнительный хеш { validate: false }.</p>
<pre class="prettyprint source lang-es6"><code>import DS from 'ember-data';
import ModelValidationMixin from 'ember-validation/mixins/validation';

const { computed } = Ember;

const GENDERS = {
  MALE: &quot;male&quot;,
  FEMALE: &quot;female&quot;,
}

var User = DS.Model.extend(ModelValidationMixin, {

  validationScheme: {
    age: {
      options: {
        condition: computed(&quot;ageRestricted&quot;)
      },
      validators: {
        { name: &quot;required&quot;, options: { message: &quot;field_is_required&quot; } },
        { name: &quot;number&quot;, options: { min: 18, max: 100, message: &quot;age_is_wrong&quot; } }
      }
    }
  },

  ageRestricted: computed.equal(&quot;gender&quot;, GENDERS.FEMALE)

  name: DS.attr('string', { validatorType: &quot;string&quot;, validatorOptions: validationProperties }),

});</code></pre><h3>Валидация на уровне представления</h3><h4>Простая форма (валидация модели с проксированием ошибок)</h4><p>[WIP]</p>
<pre class="prettyprint source lang-hbs"><code>{{!-- Main form begin --}}
  {{#form model=user as |userForm|}}

    {{input value=user.name validatePath=&quot;name&quot;}}
    {{errors-list errors=user.errors.name}}

    {{input value=user.age validatePath=&quot;age&quot;}}
    {{errors-list errors=user.errors.age}}

  {{/form}}
{{!-- Main form end --}}</code></pre><h4>Форма с расширением валидации модели</h4><p>[WIP]</p>
<h4>Вложенные формы и кастомные компоненты</h4><p>[WIP]</p>
<pre class="prettyprint source lang-hbs"><code>{{!-- Main form begin --}}
  {{#form model=employee as |mainForm|}}

    {{!-- Fields goes below --}}
    {{input value=employee.name validatePath=&quot;name&quot;}}
    {{input value=employee.age validatePath=&quot;age&quot;}}


    {{!-- Company form begin --}}
      {{#form-company model=employee.company as |companyForm| tagName=&quot;div&quot;}}

        {{input value=companyForm.model.name validatePath=&quot;name&quot;}}
        {{errors-list errors=companyForm.errors.name}}

        {{input value=companyForm.model.inn validatePath=&quot;inn&quot;}}
        {{errors-list errors=companyForm.errors.inn}}

      {{/form-company}}
    {{!-- Company form end --}}


  {{/form}}
{{!-- Main form end --}}</code></pre><h4>Кастомизация валидации модели в использовании сложных компонентов</h4><p>[WIP]</p>
<h3>Валидация на уровне контроллера</h3><p>[WIP]</p>
<h3>Обработка серверных ошибок</h3><p>[WIP]</p>
<h2>Разработка</h2><h3>Начало работы</h3><ul>
<li>Создать форк репы</li>
<li>Склонироть её к себе</li>
<li>Поставить зависимости командами: <code>npm install</code> и <code>bower install</code></li>
<li>Для разработки UI/UX нужно запустить сервер <code>ember server</code>, сайт станет доступен по адресу http://0.0.0.0:2000 (тесты соотв. http://0.0.0.0:2000/tests)</li>
<li>Если требуется работать только над тестами, то можно запустить тестовый сервер отдельно: <code>ember test --server --launch=&quot;Chrome,Chrome Canary,Firefox,Safari,Opera,PhantomJS&quot;</code></li>
</ul>
<h3>Общие положения</h3><p>На данный момент мы должны поддерживать максимальную первую мажорную версию Ember и версии Ember используемые в partners.wheely.com и business.wheely.com. Из Ember try удалены сценарии тестирования на релизе, канарах и бете.</p>
<p>Если требуется внести изменения в уже существующий функционал:</p>
<ul>
<li>Нужно согласовать изменения с разработчиками проекта</li>
<li>Если метод переименовывается или удалется на его месте требуется создать deprecated метод (то же самое для свойств).</li>
<li>Любые изменения в архитектуру проекты должны быть отражены в UML диаграмме</li>
</ul>
<h3>Документация</h3><p>Обновление документации на локальной машине:</p>
<pre class="prettyprint source lang-shell"><code>ember ember-cli-jsdoc && rm -rf tests/dummy/public/docs && mv -f docs tests/dummy/public/</code></pre><h3>Обновление сайта</h3><pre class="prettyprint source lang-shell"><code>./public.sh</code></pre><h3>Написание тестов</h3><h4>Интеграционнные тесты</h4><p>[WIP]</p>
<h4>Unit тесты</h4><p>[WIP]</p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue May 03 2016 13:29:16 GMT+0300 (MSK) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>